
{% from 'components/chart.html' import chart %}
{% from 'components/map.html' import map %}
{% from 'components/data-table.html' import datatable %}

{% macro visualisation(id, type, data) %}
<div class="govuk-tabs" data-module="govuk-tabs" style="width: 100%; height: 100%; margin: 30px 0; background-color: #fff;">
    <ul class="govuk-tabs__list" role="tablist">
        <li class="govuk-tabs__list-item govuk-tabs__list-item--selected" style="padding-left: 0;" role="presentation">
            <a class="govuk-tabs__tab" href="#chart{{ id }}_tab" id="tab_chart_{{ id }}tab" role="tab" aria-controls="chart{{ id }}_tab" aria-selected="true" tabindex="0">
                Visualisation
            </a>
        </li>
        <li class="govuk-tabs__list-item" role="presentation">
            <a class="govuk-tabs__tab" href="#data_table{{ id }}_tab" id="tab_data_table{{ id }}_tab" role="tab" aria-controls="data_table{{ id }}_tab" aria-selected="false" tabindex="-1">
                Data
            </a>
        </li>
        <li class="govuk-tabs__list-item" role="presentation">
            <a class="govuk-tabs__tab" href="#download{{ id }}_tab" id="tab_download{{ id }}tab" role="tab" aria-controls="download{{ id }}_tab" aria-selected="false" tabindex="-1">
                Download
            </a>
        </li>
    </ul>
    <p class="govuk-body-s" style="display: none;">
        <a href="javascript:;" class="govuk-link" onclick="toggle{{ id }}()">View data</a> | Download <a href="javascript:;" class="govuk-link" onclick="chart{{ id }}.download()">Chart</a> <a href="javascript:;" class="govuk-link">Data</a>
    </p>

    <div id="chart{{ id }}_tab" class="govuk-tabs__panel" style="padding: 30px 0;" role="tabpanel" aria-labelledby="tab_chart{{ id }}_tab">
        <h2 class="govuk-visually-hidden">
            Visualisation
        </h2>

        <h3 class="govuk-heading-s">{{ [data, 'title'] | attribute | safe }}</h3>
        {% if type == 'chart' %}
        {{ chart(id, data) }}
        {% else %}
        <div class="grid grid2" style="height: 700px;">
            <div style="height: 700px;">
                {{ map(id, data) }}
            </div>
            <div style="height: 700px;">
                {{ chart(id, data) }}
            </div>
        </div>
        {% endif %}
    </div>

    <div id="data_table{{ id }}_tab" class="govuk-tabs__panel" style="padding: 30px 0;" role="tabpanel" aria-labelledby="tab_data_table{{ id }}_tab">
        <h2 class="govuk-visually-hidden">
            Data
        </h2>

        <div style="max-height: 400px; overflow-y: scroll;">
            {{ datatable(id, data) }}
        </div>
    </div>

    <div id="download{{ id }}_tab" class="govuk-tabs__panel" style="padding: 30px 0;" role="tabpanel" aria-labelledby="tab_download{{ id }}_tab">
        <h2 class="govuk-visually-hidden">
            Download
        </h2>

        <ul class="govuk-list">
            <li>
                <a href="#" class="govuk-link">
                    Download the visualisation
                </a>
            </li>
            <li>
                <a href="#" class="govuk-link">
                    Download the data
                </a>
            </li>
        </ul>
    </div>
</div>
{% endmacro %}
